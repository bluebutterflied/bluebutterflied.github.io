<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<!-- <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700&display=swap" rel="stylesheet"> -->
<link href="https://fonts.googleapis.com/css?family=Nunito+Sans:600,600i,700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet"> 

<link rel="stylesheet" href="/assets/css/tailwind.css">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="stylesheet" href="/assets/css/cards.css">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100&display=swap" rel="stylesheet">
<title>Troubleshooting vTiger CRM Install on PHP 5.2</title>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-125808593-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125808593-1');
</script>



<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Troubleshooting vTiger CRM Install on PHP 5.2 | recluze - Nauman (recluze) on Computing, Philosophy and More …</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Troubleshooting vTiger CRM Install on PHP 5.2" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I recently had to deploy vTiger CRM 5 on a machine running PHP 5.2. Turned out that vTiger does not like PHP 5.2 because of some differences between PHP 5.0 and 5.2. As soon as you start the install script, you get the following error:" />
<meta property="og:description" content="I recently had to deploy vTiger CRM 5 on a machine running PHP 5.2. Turned out that vTiger does not like PHP 5.2 because of some differences between PHP 5.0 and 5.2. As soon as you start the install script, you get the following error:" />
<meta property="og:site_name" content="recluze - Nauman (recluze) on Computing, Philosophy and More …" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2010-12-16T13:27:12+05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Troubleshooting vTiger CRM Install on PHP 5.2" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Troubleshooting vTiger CRM Install on PHP 5.2","dateModified":"2010-12-16T13:27:12+05:00","datePublished":"2010-12-16T13:27:12+05:00","description":"I recently had to deploy vTiger CRM 5 on a machine running PHP 5.2. Turned out that vTiger does not like PHP 5.2 because of some differences between PHP 5.0 and 5.2. As soon as you start the install script, you get the following error:","url":"/2010/12/16/troubleshooting-vtiger-crm-install-on-php-5-2/","mainEntityOfPage":{"@type":"WebPage","@id":"/2010/12/16/troubleshooting-vtiger-crm-install-on-php-5-2/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>
  <header class="texture-blue">
    <div class="container"><div class="navbar">
	<ul>
		
		<a href="/"><li  >Home</li></a>
		
		<a href="/about"><li  >About</li></a>
		
		<a href="/learn"><li  >Courses</li></a>
		
	</ul>
</div></div><div class="container">
	<h1>Troubleshooting vTiger CRM Install on PHP 5.2</h1>
	<h4 class="post-description"></h4>
	<div class="post-date" style="margin-top:20px">
		Published on Dec 16, 2010
	</div>
	<ul class="post-tags"><li>resources</li><li>Tutorials</li></ul>
</div>
</header>
  <main>
    <div class="container">
      <div class="post-container">
          <p>I recently had to deploy vTiger CRM 5 on a machine running PHP 5.2. Turned out that vTiger does not like PHP 5.2 because of some differences between PHP 5.0 and 5.2. As soon as you start the install script, you get the following error:</p>

<p>[sourcecode lang=”bash”]<br />
Cannot redeclare class DateTime<br />
[/sourcecode]</p>

<p>The problem is that vTiger defines its own DateTime class and so does PHP 5.2. The solution therefore (see vTiger <a href="http://wiki.vtiger.com/index.php/Developers_How_To%27s">wiki</a>) was to rename the class in vTiger source. To do that, all you need to do is to run the following commands from the vtiger source root (e.g. /var/www/html/vtiger):</p>

<p>[sourcecode lang=”bash”]<br />
mv modules/Calendar/Date.php modules/Calendar/Date.php.back<br />
sed s/ DateTime/ com_vtiger_DateTime/ &lt; modules/Calendar/Date.php.back &gt; modules/Calendar/Date.php<br />
mv modules/Calendar/Appointment.php modules/Calendar/Appointment.php.back<br />
sed s/ DateTime/ com_vtiger_DateTime/ &lt; modules/Calendar/Appointment.php.back &gt; modules/Calendar/Appointment.php<br />
mv include/utils/RecurringType.php include/utils/RecurringType.php.back<br />
sed s/ DateTime/ com_vtiger_DateTime/ &lt; include/utils/RecurringType.php.back &gt; include/utils/RecurringType.php<br />
[/sourcecode]</p>

<p>This script modifies the files Date.php, Appointment.php and RecurringType.php by first taking the backup of the file and then replacing all occurrences of “ DateTime” with “ com_vtiger_DateTime”. The backup is kept in the same location.</p>

<p>After that, you can run the install script and get to the login screen. When you login, you get a new error (something to this effect):</p>

<p>[sourcecode]<br />
Catchable fatal error: Object of class &lt;ClassName&gt; could not be converted to string in /var/www/xxx on line yyy<br />
[/sourcecode]</p>

<p>The solution of this came from <a href="http://www.ilexius.de/neuigkeiten/tutorials-detail/archive/2008/Januar/article/vtiger-crm5-and-php-52/">this great post</a>. You need to create a custom error handler (called ErrorHandler.php) in the vtiger source root with the following content:</p>

<p>[sourcecode lang=”php”]<br />
&lt;?php<br />
function compatibilityErrorHandler($errno, $errstr, $errfile, $errline)<br />
{<br />
 switch ($errno) {<br />
 case  E_RECOVERABLE_ERROR:<br />
 break;<br />
 default:<br />
 echo “Unknown error type: [$errno] $errstr n”;<br />
 break;<br />
 }<br />
}</p>

<p>// set to the user defined error handler<br />
$old_error_handler = set_error_handler(“compatibilityErrorHandler”, E_RECOVERABLE_ERROR);<br />
?&gt;<br />
[/sourcecode]</p>

<p>Finally, you need to include this error handler through the config.inc.php. For that, execute the following commands:</p>

<p>[sourcecode lang=”bash”]<br />
mv config.inc.php config.inc.php.back<br />
sed “/include(‘vtigerversion.php’);/ a<br />
require_once(‘ErrorHandler.php’);” &lt; config.inc.php.back &gt; config.inc.php<br />
[/sourcecode]</p>

<p>Notice the line break after the a. The first command makes a backup. The second inserts the require_once directive after the line with the include directive.</p>


      </div>

        <!-- Configure Disqus --></div>
  </main><footer class="footer">
  <span class="text-muted"> recluze | No rights reserved.</span>
</footer>
</body>
</html>